<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><!-- meta--><title></title><meta http-equiv="X-UA-Compatible" content="IE=Edge"><!-- smartphone meta--><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no"><!-- ogp--><meta property="og:type" content="website"><meta property="og:title"><meta property="og:description"><!-- twitter card--><meta property="twitter:card" content="summary"><meta property="twitter:title"><meta property="twitter:description"><style>@charset "UTF-8";html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}table{border-collapse:collapse;border-spacing:0}main{position:fixed;top:0;left:0;width:100%;height:100%;overflow:hidden}section,article{position:fixed;top:0;left:0;width:100%;height:100%;overflow:hidden;font-size:3vw;line-height:1.5}section[data-ready=true],article[data-ready=true]{transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s}section[data-state=current],article[data-state=current]{-webkit-transform:translateX(0);transform:translateX(0)}section[data-state=past],article[data-state=past]{-webkit-transform:translateX(-100%);transform:translateX(-100%)}section[data-state=future],article[data-state=future]{-webkit-transform:translateX(100%);transform:translateX(100%)}section h1,section h2,section h3,section h4,article h1,article h2,article h3,article h4{font-weight:700}section h1,section h2,section h3,section h4{position:absolute;top:50%;left:0;width:100%;text-align:center;-webkit-transform:translateY(-50%);transform:translateY(-50%)}section h1{font-size:10vw}section h2{font-size:8vw}section h3{font-size:6vw}section h4{font-size:4vw}article>*{margin:2vw}article header h1,article header h2,article header h3,article header h4{font-size:5vw;display:none}article header h1:last-child,article header h2:last-child,article header h3:last-child,article header h4:last-child{display:block}article li{margin:2vw 0}article ul li{position:relative;padding-left:1em}article ul li:before{content:'・';position:absolute;top:0;left:0}article code{padding:.8vw 1vw}article pre{white-space:pre}article pre code{font-size:2vw;display:block}a {
    color: inherit;
}

em {
    font-weight: bold;
}

strong {
    font-weight: bold;
}

body {
    background-color: #040;
    color: #fff;
}

h1, h2, h3 {
    color: #cfc;
}
h1 span,
h2 span,
h3 span {
    display: inline-block;
}

hr {
    border: none;
    padding: 0px;
    margin: 0px;
    height: 1em;
}

blockquote {
    border-left: solid 0.3vw white;
    padding-left: 0.5em;
    color: rgba(255, 255, 255, 0.8);
}

code {
    background-color: rgba(0, 0, 0, 0.5);
}</style></head><body><main></article><section><h1><span>lodash.jsを</span><span>本当に使いこなす</span></h1></section><section><h2>lodash.jsとは</h2></section><article><header><h1><span>lodash.jsを</span><span>本当に使いこなす</span></h1><h2>lodash.jsとは</h2></header><blockquote><p>A modern JavaScript utility library delivering modularity, performance & extras.</p></blockquote><ul><li>ユーティリティー（なんか便利）関数を集めたやつ</li><li>めっちゃかるい</li><li>多少なりデータを取り回す案件では、 <strong>個人的には必須のライブラリ</strong></li></ul></article><section><h2>主な利用ケース</h2></section><article><header><h1><span>lodash.jsを</span><span>本当に使いこなす</span></h1><h2>主な利用ケース</h2></header><ul><li>配列やオブジェクトをほしい形に整形する</li><li>イデオム系の実装を借りてくる</li><li>テンプレートエンジン</li></ul></article><section><h2><span>配列やオブジェクトを</span><span>ほしい形に整形する</span></h2></section><section><h3>each</h3></section><article><header><h1><span>lodash.jsを</span><span>本当に使いこなす</span></h1><h2><span>配列やオブジェクトを</span><span>ほしい形に整形する</span></h2><h3>each</h3></header><p><pre><code>_.each(bigArray, (item) => {
    console.log(item);
});
</code></pre></p><ul><li><code>_.xxx()</code> のかたちで呼び出す</li><li>さすがに中身は説明しません</li></ul></article><section><h3>map</h3></section><article><header><h1><span>lodash.jsを</span><span>本当に使いこなす</span></h1><h2><span>配列やオブジェクトを</span><span>ほしい形に整形する</span></h2><h3>map</h3></header><p><pre><code>const charaArray = [{
    id: 25,
    name: 'ピカチュウ',
    type: [ 'でんき' ]
},{
    id: 35,
    name: 'ピッピ',
    type: [ 'ノーマル' ]
},{
    id: 39,
    name: 'プリン',
    type: [ 'ノーマル' ]
}];
</code></pre></p><p><pre><code>const ids = _.map(charaArray, (chara) => {
    return chara.id;
});
// => [ 25, 35, 39 ]
</code></pre></p><ul><li>整形の基本。配列に入ったオブジェクトを一つずつループして、欲しい値だけ取り出してreturn</li></ul></article><section><h3>mapValues</h3></section><article><header><h1><span>lodash.jsを</span><span>本当に使いこなす</span></h1><h2><span>配列やオブジェクトを</span><span>ほしい形に整形する</span></h2><h3>mapValues</h3></header><p><pre><code>const charaData = {
    25: {
        name: 'ピカチュウ', type: [ 'でんき' ]
    },
    35: {
        name: 'ピッピ', type: [ 'ノーマル' ]
    },
    39: {
        name: 'プリン', type: [ 'ノーマル' ]
    }
};
&nbsp;
</code></pre></p><p><pre><code>const idCharaName = _.mapValues(charaData, (chara) => {
    return chara.name;
});
// => { 25: 'ピカチュウ': 35: 'ピッピ': 39: 'プリン' }
</code></pre></p><ul><li><p>オブジェクトの値をひとつずつループして、欲しい値をつくってreturn</p></li><li><p>mapとの違いは配列ではなく、<strong>オブジェクトを受け取ってオブジェクトを返す</strong>こと</p></li></ul><p><hr></p><ul><li>配列を渡すと暗黙的にオブジェクトに変換してくるので注意</li></ul><p><pre><code>const ids = _.mapValues(charaArray, (chara) => {
    return chara.id;
});
// => { 0: 25, 1: 35, 2: 39 }
</code></pre></p></article><section><h3>mapKeys</h3></section><article><header><h1><span>lodash.jsを</span><span>本当に使いこなす</span></h1><h2><span>配列やオブジェクトを</span><span>ほしい形に整形する</span></h2><h3>mapKeys</h3></header><p><pre><code>const idCharaData = _.mapKeys(charaArray, (chara) => {
    return chara.id;
});
</code></pre></p><ul><li>オブジェクトのvalueをひとつずつループして、欲しい <strong>keyを</strong>つくってreturn</li><li>こちらはむしろ、暗黙的にオブジェクトに変換してくるのを上手く利用できるケース</li></ul></article><section><h3>filter</h3></section><section><h3>pickBy</h3></section><section><h3>invertBy / groupBy</h3></section><section><h3>shuffle / sample</h3></section><section><h3>sortBy / orderBy</h3></section><section><h2>wrapper記法</h2></section><article><header><h1><span>lodash.jsを</span><span>本当に使いこなす</span></h1><h2>wrapper記法</h2></header><ul><li>wrapper記法を使うことで、複数のlodash関数を <strong>メソッドチェーンで繋ぐことができる</strong></li><li>ここまで使いこなすと、複雑なデータ変換もかなりスマートに書けるようになる</li></ul></article><section><h2>イデオム系の実装を借りてくる</h2></section><article><header><h1><span>lodash.jsを</span><span>本当に使いこなす</span></h1><h2>イデオム系の実装を借りてくる</h2></header><ul><li>padStart</li><li>throttle / debounce</li></ul></article><section><h2>テンプレートエンジン</h2></section><article><header><h1><span>lodash.jsを</span><span>本当に使いこなす</span></h1><h2>テンプレートエンジン</h2></header><p>:sugoi:</p></article><section><h2>注意点</h2></section><article><header><h1><span>lodash.jsを</span><span>本当に使いこなす</span></h1><h2>注意点</h2></header><ul><li><p>array用とobject用が別関数になっていたりするので注意</p></li><li><p>破壊的な変更をするものもあるので注意</p><ul><li>wrapperでつなぐと気にならないパターンもある</li></ul></li></ul></main><script>(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

function EventEmitter() {
  this._events = this._events || {};
  this._maxListeners = this._maxListeners || undefined;
}
module.exports = EventEmitter;

// Backwards-compat with node 0.10.x
EventEmitter.EventEmitter = EventEmitter;

EventEmitter.prototype._events = undefined;
EventEmitter.prototype._maxListeners = undefined;

// By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.
EventEmitter.defaultMaxListeners = 10;

// Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.
EventEmitter.prototype.setMaxListeners = function(n) {
  if (!isNumber(n) || n < 0 || isNaN(n))
    throw TypeError('n must be a positive number');
  this._maxListeners = n;
  return this;
};

EventEmitter.prototype.emit = function(type) {
  var er, handler, len, args, i, listeners;

  if (!this._events)
    this._events = {};

  // If there is no 'error' event listener then throw.
  if (type === 'error') {
    if (!this._events.error ||
        (isObject(this._events.error) && !this._events.error.length)) {
      er = arguments[1];
      if (er instanceof Error) {
        throw er; // Unhandled 'error' event
      } else {
        // At least give some kind of context to the user
        var err = new Error('Uncaught, unspecified "error" event. (' + er + ')');
        err.context = er;
        throw err;
      }
    }
  }

  handler = this._events[type];

  if (isUndefined(handler))
    return false;

  if (isFunction(handler)) {
    switch (arguments.length) {
      // fast cases
      case 1:
        handler.call(this);
        break;
      case 2:
        handler.call(this, arguments[1]);
        break;
      case 3:
        handler.call(this, arguments[1], arguments[2]);
        break;
      // slower
      default:
        args = Array.prototype.slice.call(arguments, 1);
        handler.apply(this, args);
    }
  } else if (isObject(handler)) {
    args = Array.prototype.slice.call(arguments, 1);
    listeners = handler.slice();
    len = listeners.length;
    for (i = 0; i < len; i++)
      listeners[i].apply(this, args);
  }

  return true;
};

EventEmitter.prototype.addListener = function(type, listener) {
  var m;

  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  if (!this._events)
    this._events = {};

  // To avoid recursion in the case that type === "newListener"! Before
  // adding it to the listeners, first emit "newListener".
  if (this._events.newListener)
    this.emit('newListener', type,
              isFunction(listener.listener) ?
              listener.listener : listener);

  if (!this._events[type])
    // Optimize the case of one listener. Don't need the extra array object.
    this._events[type] = listener;
  else if (isObject(this._events[type]))
    // If we've already got an array, just append.
    this._events[type].push(listener);
  else
    // Adding the second element, need to change to array.
    this._events[type] = [this._events[type], listener];

  // Check for listener leak
  if (isObject(this._events[type]) && !this._events[type].warned) {
    if (!isUndefined(this._maxListeners)) {
      m = this._maxListeners;
    } else {
      m = EventEmitter.defaultMaxListeners;
    }

    if (m && m > 0 && this._events[type].length > m) {
      this._events[type].warned = true;
      console.error('(node) warning: possible EventEmitter memory ' +
                    'leak detected. %d listeners added. ' +
                    'Use emitter.setMaxListeners() to increase limit.',
                    this._events[type].length);
      if (typeof console.trace === 'function') {
        // not supported in IE 10
        console.trace();
      }
    }
  }

  return this;
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener;

EventEmitter.prototype.once = function(type, listener) {
  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  var fired = false;

  function g() {
    this.removeListener(type, g);

    if (!fired) {
      fired = true;
      listener.apply(this, arguments);
    }
  }

  g.listener = listener;
  this.on(type, g);

  return this;
};

// emits a 'removeListener' event iff the listener was removed
EventEmitter.prototype.removeListener = function(type, listener) {
  var list, position, length, i;

  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  if (!this._events || !this._events[type])
    return this;

  list = this._events[type];
  length = list.length;
  position = -1;

  if (list === listener ||
      (isFunction(list.listener) && list.listener === listener)) {
    delete this._events[type];
    if (this._events.removeListener)
      this.emit('removeListener', type, listener);

  } else if (isObject(list)) {
    for (i = length; i-- > 0;) {
      if (list[i] === listener ||
          (list[i].listener && list[i].listener === listener)) {
        position = i;
        break;
      }
    }

    if (position < 0)
      return this;

    if (list.length === 1) {
      list.length = 0;
      delete this._events[type];
    } else {
      list.splice(position, 1);
    }

    if (this._events.removeListener)
      this.emit('removeListener', type, listener);
  }

  return this;
};

EventEmitter.prototype.removeAllListeners = function(type) {
  var key, listeners;

  if (!this._events)
    return this;

  // not listening for removeListener, no need to emit
  if (!this._events.removeListener) {
    if (arguments.length === 0)
      this._events = {};
    else if (this._events[type])
      delete this._events[type];
    return this;
  }

  // emit removeListener for all listeners on all events
  if (arguments.length === 0) {
    for (key in this._events) {
      if (key === 'removeListener') continue;
      this.removeAllListeners(key);
    }
    this.removeAllListeners('removeListener');
    this._events = {};
    return this;
  }

  listeners = this._events[type];

  if (isFunction(listeners)) {
    this.removeListener(type, listeners);
  } else if (listeners) {
    // LIFO order
    while (listeners.length)
      this.removeListener(type, listeners[listeners.length - 1]);
  }
  delete this._events[type];

  return this;
};

EventEmitter.prototype.listeners = function(type) {
  var ret;
  if (!this._events || !this._events[type])
    ret = [];
  else if (isFunction(this._events[type]))
    ret = [this._events[type]];
  else
    ret = this._events[type].slice();
  return ret;
};

EventEmitter.prototype.listenerCount = function(type) {
  if (this._events) {
    var evlistener = this._events[type];

    if (isFunction(evlistener))
      return 1;
    else if (evlistener)
      return evlistener.length;
  }
  return 0;
};

EventEmitter.listenerCount = function(emitter, type) {
  return emitter.listenerCount(type);
};

function isFunction(arg) {
  return typeof arg === 'function';
}

function isNumber(arg) {
  return typeof arg === 'number';
}

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}

function isUndefined(arg) {
  return arg === void 0;
}

},{}],2:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function init(){var e=parseHash();setPageIndex(e>=0?e:0),initInnerPager(),initListeners(),setTimeout(setReady)}function parseHash(){var e=location.hash,n=e.match(/^#?p([1-9][0-9]*)/);return n?parseInt(n[1]):-1}function initListeners(){window.addEventListener("hashchange",function(){var e=parseHash();e>=0&&setPageIndex(e)}),window.addEventListener("resize",function(){innerPagerList.forEach(function(e){e&&e.reload()})})}function setReady(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=0;n<pages.length;n++){pages[n].setAttribute("data-ready",e)}}function setPageIndex(e){e=Math.max(e,0),e=Math.min(e,pages.length-1);for(var n=0;n<pages.length;n++){var t=pages[n];n===e?t.setAttribute(ATTR_STATE,"current"):n<e?t.setAttribute(ATTR_STATE,"past"):n>e&&t.setAttribute(ATTR_STATE,"future")}currentIndex=e,location.hash="#p"+e}function initInnerPager(){for(var e=0;e<pages.length;e++){var n=pages[e];if(/^article$/i.test(n.tagName)){var t=new _InnerPager2.default(n);t.on("overEnd",incrementPage),t.on("overStart",decrementPage),innerPagerList[e]=t}else innerPagerList[e]=null}}function incrementPage(){setPageIndex(currentIndex+1)}function decrementPage(){setPageIndex(currentIndex-1)}function increment(){var e=innerPagerList[currentIndex];e?e.increment():incrementPage()}function decrement(){var e=innerPagerList[currentIndex];e?e.decrement():decrementPage()}var _InnerPager=require("./lib/InnerPager"),_InnerPager2=_interopRequireDefault(_InnerPager),ATTR_STATE="data-state",pages=document.querySelectorAll("section,article"),innerPagerList=[],currentIndex=void 0;window.addEventListener("keydown",function(e){switch(e.which){case 37:case 38:decrement();break;case 39:case 40:increment()}}),init();

},{"./lib/InnerPager":3}],3:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_events=require("events"),_events2=_interopRequireDefault(_events),IGNORE_PATTERN=new RegExp("^"+["header"].join("|")+"$","i"),SKIP_PATTERN=new RegExp("^"+["ul","ol","dl"].join("|")+"$","i"),InnerPager=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.root=e,n.blocks=n.pickupBlocks(),n.reload(),n}return _inherits(t,e),_createClass(t,[{key:"pickupBlocks",value:function(){function e(n){arguments.length>1&&void 0!==arguments[1]&&arguments[1];Array.from(n.children).forEach(function(n){IGNORE_PATTERN.test(n.tagName)||(SKIP_PATTERN.test(n.tagName)?e(n):t.push(n))})}var t=[];return e(this.root),t}},{key:"reload",value:function(){this.setRangeStart(this.rangeStart)}},{key:"setRangeStart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e>=this.blocks.length)return void this.emit("overEnd");this.blocks.forEach(function(t,n){t.style.display=n<e?"none":""});for(var t=0;this.root.scrollHeight>this.root.offsetHeight&&t<this.blocks.length;){var n=this.blocks.length-(t+1);this.blocks[n].style.display="none",t++}this.rangeStart=e,this.rangeEnd=this.blocks.length-t}},{key:"setRangeEnd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blocks.length;if(e<=0)return void this.emit("overStart");this.blocks.forEach(function(t,n){t.style.display=n>=e?"none":""});for(var t=0;this.root.scrollHeight>this.root.offsetHeight;)this.blocks[t].style.display="none",t++;this.rangeStart=t,this.rangeEnd=e}},{key:"increment",value:function(){this.setRangeStart(this.rangeEnd)}},{key:"decrement",value:function(){this.setRangeEnd(this.rangeStart)}}]),t}(_events2.default);exports.default=InnerPager;

},{"events":1}]},{},[2]);
</script></body></html>